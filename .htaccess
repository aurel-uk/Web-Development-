# ============================================
# APACHE CONFIGURATION
# ============================================
# Ky skedar konfiguron serverin Apache për siguri dhe URL routing.

# Ndiz rewrite engine
RewriteEngine On

# Siguron që drejtuesi (directory root) është korrekt
RewriteBase /Web-Development-/

# Blloko aksesin në skedarë sensitive
<FilesMatch "\.(env|log|sql|htaccess|htpasswd|ini|sh|bak)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Blloko aksesin në dosjet sensitive
RewriteRule ^(config|classes|includes|logs)/ - [F,L]

# Blloko aksesin në .git
RewriteRule ^\.git - [F,L]

# URL e bukur (opsionale për të ardhmen)
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]

# Parandalon directory listing
Options -Indexes

# Siguron header-at
<IfModule mod_headers.c>
    # Parandalon XSS
    Header set X-XSS-Protection "1; mode=block"

    # Parandalon MIME type sniffing
    Header set X-Content-Type-Options "nosniff"

    # Parandalon clickjacking
    Header set X-Frame-Options "SAMEORIGIN"

    # Referrer policy
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Kompresimi (përmirëson shpejtësinë)
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript application/json
</IfModule>

# Cache për skedarët statikë
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
</IfModule>

# PHP Settings (nëse lejohet nga serveri)
<IfModule mod_php.c>
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 60
    php_value session.cookie_httponly 1
</IfModule>

# Error pages custom
ErrorDocument 404 /Web-Development-/views/errors/404.php
ErrorDocument 403 /Web-Development-/views/errors/403.php
ErrorDocument 500 /Web-Development-/views/errors/500.php
